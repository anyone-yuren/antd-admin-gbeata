var E=Object.defineProperty,Y=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var I=(a,s,t)=>s in a?E(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,x=(a,s)=>{for(var t in s||(s={}))w.call(s,t)&&I(a,t,s[t]);if(p)for(var t of p(s))F.call(s,t)&&I(a,t,s[t]);return a},f=(a,s)=>Y(a,T(s));var C=(a,s)=>{var t={};for(var i in a)w.call(a,i)&&s.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&p)for(var i of p(a))s.indexOf(i)<0&&F.call(a,i)&&(t[i]=a[i]);return t};var D=(a,s,t)=>new Promise((i,d)=>{var b=l=>{try{c(t.next(l))}catch(o){d(o)}},m=l=>{try{c(t.throw(l))}catch(o){d(o)}},c=l=>l.done?i(l.value):Promise.resolve(l.value).then(b,m);c((t=t.apply(a,s)).next())});import{G as k,r as N,j as e,a as M,H as P,B as g,al as S,h as v,J as R,I as V}from"./index-17f935ee.js";import{D as B,d as G}from"./index-8266e2cb.js";import{P as _,d as K}from"./websiteSetting-d97af6b3.js";import{T as O}from"./Table-e2e72da4.js";import{P as A}from"./index-722dc7e1.js";import{R as H}from"./index-f6ad208a.js";import{I as J}from"./index-67eddd0a.js";import"./addEventListener-f7b371b8.js";import"./iconUtil-b0378580.js";import"./objectDestructuringEmpty-24e23e90.js";import"./index-88f4a223.js";import"./index-a0e99b5c.js";const L=[{key:"1001",name:"张三",sex:"男",birth:"2002-05-06",education:"高中",hobby:"羽毛球、篮球、听歌、阅读",forbid:!1},{key:"1002",name:"李四",sex:"男",birth:"1998-09-21",education:"初中",hobby:"乒乓球、排球、游泳",forbid:!0},{key:"1003",name:"王五",sex:"男",birth:"1993-06-06",education:"本科",hobby:"旱冰、滑雪、跳高、打游戏",forbid:!1},{key:"1004",name:"辛八",sex:"男",birth:"1995-08-03",education:"大专",hobby:"网球、篮球、跳伞",forbid:!0},{key:"1005",name:"刘二",sex:"女",birth:"1999-11-05",education:"本科",hobby:"滑翔、游泳、篮球、看电影",forbid:!0},{key:"1006",name:"赵七",sex:"男",birth:"2000-07-18",education:"大专",hobby:"游泳、篮球、潜水",forbid:!1},{key:"1007",name:"杨一",sex:"女",birth:"1998-12-25",education:"高中",hobby:"冲浪、上网、看书、打游戏",forbid:!1}],W={key:{title:"数字输入框",type:"number"},name:{title:"输入框",type:"text"},sex:{title:"单选框",type:"radio"},birth:{title:"日期选择框",type:"date"},education:{title:"选择器",type:"select"},hobby:{title:"多选框",type:"checkbox"},forbid:{title:"开关",type:"switch"},action:{title:"按钮",type:"button"}},q=(a,s)=>{switch(a){case"number":return e.jsx(J,{min:1e3,max:2e3});case"text":return e.jsx(V,{});case"radio":return e.jsx(H.Group,{options:["男","女"].map(t=>({value:t,label:t}))});case"date":return e.jsx("div",{children:e.jsx(B,{defaultValue:G(s.birth,"YYYY-MM-DD"),format:"YYYY-MM-DD"})});case"select":return e.jsx(R,{options:["初中","高中","大专","本科"].map(t=>({value:t})),style:{width:"80px"}});case"checkbox":return e.jsx(v.Group,{options:s.hobby.split("、"),defaultValue:s.hobby.split("、")});case"switch":return e.jsx(S,{defaultChecked:s.forbid})}},z=l=>{var o=l,{editing:a,dataIndex:s,title:t,cellType:i,record:d,index:b,children:m}=o,c=C(o,["editing","dataIndex","title","cellType","record","index","children"]);const u=q(i,d);return e.jsx("td",f(x({},c),{children:a?e.jsx(k.Item,{name:s,style:{margin:0},children:u}):m}))},de=()=>{const[a]=k.useForm(),[s,t]=N.useState(L),[i,d]=N.useState(""),b=n=>n.key===i,m=n=>{a.setFieldsValue(x({},n)),d(n.key)},c=()=>{d("")},l=n=>D(void 0,null,function*(){try{const r=yield a.validateFields(),h=[...s],j=h.findIndex(y=>n===y.key);if(j>-1){const y=h[j];h.splice(j,1,x(x({},y),r)),t(h),d("")}else h.push(r),t(h),d("")}catch(r){console.log("Validate Failed:",r)}}),u=[{title:()=>e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"编号"}),e.jsx("p",{className:"sub-title",children:"(数字输入框)"})]}),dataIndex:"key",width:70,editable:!0,align:"center"},{title:()=>e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"姓名"}),e.jsx("p",{className:"sub-title",children:"(输入框)"})]}),dataIndex:"name",width:110,editable:!0,align:"center"},{title:()=>e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"性别"}),e.jsx("p",{className:"sub-title",children:"(单选框)"})]}),dataIndex:"sex",width:120,editable:!0,align:"center"},{title:()=>e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"生日"}),e.jsx("p",{className:"sub-title",children:"(日期选择器)"})]}),dataIndex:"birth",width:140,editable:!0,align:"center"},{title:()=>e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"学历"}),e.jsx("p",{className:"sub-title",children:"(选择器)"})]}),dataIndex:"education",width:80,editable:!0,align:"center"},{title:()=>e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"爱好"}),e.jsx("p",{className:"sub-title",children:"(多选框)"})]}),dataIndex:"hobby",width:250,editable:!0,align:"center"},{title:()=>e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"禁止编辑"}),e.jsx("p",{className:"sub-title",children:"(开关)"})]}),dataIndex:"forbid",width:70,editable:!0,align:"center",render:(n,r)=>e.jsx("span",{children:r.forbid?"是":"否"})},{title:()=>e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"操作"}),e.jsx("p",{className:"sub-title",children:"(按钮)"})]}),dataIndex:"action",width:70,align:"center",render:(n,r)=>b(r)?e.jsxs(P,{children:[e.jsx(g,{type:"primary",ghost:!0,onClick:()=>l(r.key),children:"保存"}),e.jsx(A,{title:"是否取消编辑？",onConfirm:c,children:e.jsx(g,{type:"primary",danger:!0,ghost:!0,children:"取消"})})]}):e.jsx(g,{disabled:i!=="",onClick:()=>m(r),children:"编辑"})}].map(n=>n.editable?f(x({},n),{onCell:r=>({record:r,cellType:W[n.dataIndex].type,dataIndex:n.dataIndex,title:n.title,editing:b(r)})}):n);return e.jsx(_,{plugin:K,children:e.jsx(M,{bordered:!1,children:e.jsx(k,{form:a,component:!1,children:e.jsx(O,{components:{body:{cell:z}},dataSource:s,columns:u,pagination:!1})})})})};export{de as default};
