import{n as ie,g as ae,J as oe,F as le,S as ue,a1 as se,au as ce,o as fe,az as me}from"./antd-f8926cfc.js";import{r as m,a as c}from"./react-360e162b.js";import{C as de,e as pe,g as A,l as _,F as ye,D as ve}from"./entry/index-83957f64.1705646579139.js";var ge=["fields","onConfirm","onReset","formExtend","defaultOpen","toggleVisible","openRow","actionVisible","inline"];function E(t){"@babel/helpers - typeof";return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(t)}function x(){return x=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},x.apply(this,arguments)}function N(t,e){return Oe(t)||Se(t,e)||he(t,e)||be()}function be(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function he(t,e){if(t){if(typeof t=="string")return $(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(t,e)}}function $(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Se(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,v,p=[],f=!0,y=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;f=!1}else for(;!(f=(n=s.call(r)).done)&&(p.push(n.value),p.length!==e);f=!0);}catch(o){y=!0,a=o}finally{try{if(!f&&r.return!=null&&(v=r.return(),Object(v)!==v))return}finally{if(y)throw a}}return p}}function Oe(t){if(Array.isArray(t))return t}function we(t,e){if(t==null)return{};var r=Ee(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ee(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,s;for(s=0;s<n.length;s++)a=n[s],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function j(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?k(Object(r),!0).forEach(function(n){Re(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Re(t,e,r){return e=Fe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fe(t){var e=je(t,"string");return E(e)=="symbol"?e:String(e)}function je(t,e){if(E(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(E(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _e={large:6,middle:8,small:12,mini:24},Pe=2,Te=function(e,r){return e.order===void 0?r:e.order},Ae=function(e,r,n,a,s,v){var p=0,f=0,y=e.filter(function(o){return o.hidden!==!0}).map(function(o,g){return j(j({},o),{},{order:Te(o,g)})});return y.sort(function(o,g){return o.order-g.order}),y=y.map(function(o,g){var u=j({},o);if(v)return u.title="",[ye,ve].includes(o.type||"")||(u.props=j({placeholder:o.title||""},o.props)),u;var b=o.grid?o.grid[n]:a;return b+f>24?(p+=24-f,f=24-b):f+=b,f===24&&(f=0),p+=b,r&&p>s*24-a&&g!==0&&(u.hidden=!0),u.span=b,u}),{searchFields:y,span:p}},xe=function(e){return e?_.search.collapsed:_.search.expand},Ce=["getFieldValue","getFieldsValue","getFieldError","getFieldsError","isFieldTouched","isFieldsTouched","isFieldValidating","resetFields","scrollToField","setFields","setFieldsValue","submit","validateFields"],Ie=m.forwardRef(function(e,r){var n=e.fields,a=e.onConfirm,s=e.onReset,v=e.formExtend,p=e.defaultOpen,f=e.toggleVisible,y=e.openRow,o=y===void 0?Pe:y,g=e.actionVisible,u=e.inline,b=we(e,ge),H=de(),C=H.styles,P=m.useRef(),M=m.useRef(0),K=m.useState(!p),V=N(K,2),h=V[0],U=V[1],Y=m.useState("large"),D=N(Y,2),T=D[0],J=D[1],S=m.useMemo(function(){return _e[T]},[T]),I=Ae(n,h,T,S,o,u||!1),R=I.searchFields,O=I.span,L=m.useMemo(function(){if(!u){if(O<=18)return 6;var i=0,l=0,d=0;R.forEach(function(re,ne){var w=re.span||S;w+l>24?(i+=24-l,l=24-w):l+=w,l===24&&(l=0),i+w+S>o*24&&!d&&ne!==0&&(d=i),i+=w}),d===0&&(d=i);var B=24-(h?d:i)%24;return B}},[R,S,h,O,u]),z=m.useMemo(function(){return O>=24-S},[O]),q=m.useMemo(function(){var i={};return z?i.textAlign="right":i.paddingLeft=50,u&&(i={}),i},[z,u]),F=m.useRef(),G={resize:function(){return W()}};Ce.forEach(function(i){G[i]=function(){var l;return(l=F.current)[i].apply(l,arguments)}}),m.useImperativeHandle(r,function(){return G});var Q=function(){U(!h)},X=function(){try{var l=P.current.offsetWidth,d="large";l>1300?d="large":l>900?d="middle":l>700?d="small":d="mini",J(d)}catch(B){}},W=function(){var l=Date.now();l-M.current>100&&(X(),M.current=l)};m.useLayoutEffect(function(){var i=new window.ResizeObserver(function(){W()});return i.observe(P.current),function(){i.disconnect()}},[]);var Z=function(){F.current.resetFields(),F.current.submit(),s&&s()},ee=function(l){a&&a(l)},te=function(){return c.createElement(A,{type:"link",onClick:Q},xe(h),h?c.createElement(fe,null):c.createElement(me,null))};return c.createElement(ie,{className:ae(C.gSearch,u?"":"full-width",u?C.inline:"")},c.createElement("div",{className:"g-search-content",ref:P},c.createElement(pe,x({layout:{labelCol:{flex:"100px"}},ref:F,fields:R,span:S,gutter:u?0:16,formLayout:u?"inline":"horizontal",onConfirm:ee},b,v),g!==!1&&c.createElement(oe,{span:L,style:q},c.createElement(le.Item,null,c.createElement(ue,null,c.createElement(A,{htmlType:"submit",type:"primary",icon:c.createElement(se,null)},_.search.search),c.createElement(A,{icon:c.createElement(ce,null),onClick:Z},_.search.reset),f!==!1&&!u?O>o*24-(L||0)&&R.length>1&&c.createElement(te,null):null))))))});export{Ie as G};
