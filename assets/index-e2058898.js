var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(t,a,i)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i,l=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&s(e,a,t[a]);if(i)for(var a of i(t))r.call(t,a)&&s(e,a,t[a]);return e},d=(e,i)=>t(e,a(i));import{Q as c,r as o,j as h,a as b,O as x,X as p,B as u,b7 as y,aC as j,k as m,Y as f,au as g,b8 as k,Z as w,I as v,W as I}from"./index-23c8ddfa.js";import{P as F,d as O}from"./websiteSetting-4c58a8c6.js";const Y=[{key:"1001",name:"张三",sex:"男",birth:"2002-05-06",education:"高中",hobby:"羽毛球、篮球、听歌、阅读",forbid:!1},{key:"1002",name:"李四",sex:"男",birth:"1998-09-21",education:"初中",hobby:"乒乓球、排球、游泳",forbid:!0},{key:"1003",name:"王五",sex:"男",birth:"1993-06-06",education:"本科",hobby:"旱冰、滑雪、跳高、打游戏",forbid:!1},{key:"1004",name:"辛八",sex:"男",birth:"1995-08-03",education:"大专",hobby:"网球、篮球、跳伞",forbid:!0},{key:"1005",name:"刘二",sex:"女",birth:"1999-11-05",education:"本科",hobby:"滑翔、游泳、篮球、看电影",forbid:!0},{key:"1006",name:"赵七",sex:"男",birth:"2000-07-18",education:"大专",hobby:"游泳、篮球、潜水",forbid:!1},{key:"1007",name:"杨一",sex:"女",birth:"1998-12-25",education:"高中",hobby:"冲浪、上网、看书、打游戏",forbid:!1}],N={key:{title:"数字输入框",type:"number"},name:{title:"输入框",type:"text"},sex:{title:"单选框",type:"radio"},birth:{title:"日期选择框",type:"date"},education:{title:"选择器",type:"select"},hobby:{title:"多选框",type:"checkbox"},forbid:{title:"开关",type:"switch"},action:{title:"按钮",type:"button"}},P=e=>{var t=e,{editing:a,dataIndex:s,title:o,cellType:b,record:x,index:p,children:u}=t,y=((e,t)=>{var a={};for(var s in e)n.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&i)for(var s of i(e))t.indexOf(s)<0&&r.call(e,s)&&(a[s]=e[s]);return a})(t,["editing","dataIndex","title","cellType","record","index","children"]);const F=((e,t)=>{switch(e){case"number":return h.jsx(I,{min:1e3,max:2e3});case"text":return h.jsx(v,{});case"radio":return h.jsx(w.Group,{options:["男","女"].map((e=>({value:e,label:e})))});case"date":return h.jsx("div",{children:h.jsx(g,{defaultValue:k(t.birth,"YYYY-MM-DD"),format:"YYYY-MM-DD"})});case"select":return h.jsx(f,{options:["初中","高中","大专","本科"].map((e=>({value:e}))),style:{width:"80px"}});case"checkbox":return h.jsx(m.Group,{options:t.hobby.split("、"),defaultValue:t.hobby.split("、")});case"switch":return h.jsx(j,{defaultChecked:t.forbid})}})(b,x);return h.jsx("td",d(l({},y),{children:a?h.jsx(c.Item,{name:s,style:{margin:0},children:F}):u}))},C=()=>{const[e]=c.useForm(),[t,a]=o.useState(Y),[i,n]=o.useState(""),r=e=>e.key===i,s=()=>{n("")},j=i=>{return r=void 0,s=null,d=function*(){try{const r=yield e.validateFields(),s=[...t],d=s.findIndex((e=>i===e.key));if(d>-1){const e=s[d];s.splice(d,1,l(l({},e),r)),a(s),n("")}else s.push(r),a(s),n("")}catch(r){console.log("Validate Failed:",r)}},new Promise(((e,t)=>{var a=e=>{try{n(d.next(e))}catch(a){t(a)}},i=e=>{try{n(d.throw(e))}catch(a){t(a)}},n=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,i);n((d=d.apply(r,s)).next())}));var r,s,d},m=[{title:()=>h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"编号"}),h.jsx("p",{className:"sub-title",children:"(数字输入框)"})]}),dataIndex:"key",width:70,editable:!0,align:"center"},{title:()=>h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"姓名"}),h.jsx("p",{className:"sub-title",children:"(输入框)"})]}),dataIndex:"name",width:110,editable:!0,align:"center"},{title:()=>h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"性别"}),h.jsx("p",{className:"sub-title",children:"(单选框)"})]}),dataIndex:"sex",width:120,editable:!0,align:"center"},{title:()=>h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"生日"}),h.jsx("p",{className:"sub-title",children:"(日期选择器)"})]}),dataIndex:"birth",width:140,editable:!0,align:"center"},{title:()=>h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"学历"}),h.jsx("p",{className:"sub-title",children:"(选择器)"})]}),dataIndex:"education",width:80,editable:!0,align:"center"},{title:()=>h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"爱好"}),h.jsx("p",{className:"sub-title",children:"(多选框)"})]}),dataIndex:"hobby",width:250,editable:!0,align:"center"},{title:()=>h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"禁止编辑"}),h.jsx("p",{className:"sub-title",children:"(开关)"})]}),dataIndex:"forbid",width:70,editable:!0,align:"center",render:(e,t)=>h.jsx("span",{children:t.forbid?"是":"否"})},{title:()=>h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"操作"}),h.jsx("p",{className:"sub-title",children:"(按钮)"})]}),dataIndex:"action",width:70,align:"center",render:(t,a)=>r(a)?h.jsxs(p,{children:[h.jsx(u,{type:"primary",ghost:!0,onClick:()=>j(a.key),children:"保存"}),h.jsx(y,{title:"是否取消编辑？",onConfirm:s,children:h.jsx(u,{type:"primary",danger:!0,ghost:!0,children:"取消"})})]}):h.jsx(u,{disabled:""!==i,onClick:()=>(t=>{e.setFieldsValue(l({},t)),n(t.key)})(a),children:"编辑"})}].map((e=>e.editable?d(l({},e),{onCell:t=>({record:t,cellType:N[e.dataIndex].type,dataIndex:e.dataIndex,title:e.title,editing:r(t)})}):e));return h.jsx(F,{plugin:O,children:h.jsx(b,{bordered:!1,children:h.jsx(c,{form:e,component:!1,children:h.jsx(x,{components:{body:{cell:P}},dataSource:t,columns:m,pagination:!1})})})})};export{C as default};
