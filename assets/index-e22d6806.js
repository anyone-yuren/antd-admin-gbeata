import{ai as _t,S as st,k as se,ay as wt,ab as At,aj as ze,az as Ot,$ as Ft,a0 as xt,v as Tt,I as Pt,aA as Ct,aB as jt,a7 as Dt,T as Rt,N as Vt,al as $t,g as It}from"./antd-66264537.js";import{r as d,a as i}from"./react-f288da4a.js";import{x as ft,y as dt,z as mt,A as yt,n as A,s as Je,B as Z,G as kt,D as Kt,E as Mt,H as Nt,I as zt,J as Bt,K as Ht}from"./entry/index-49ff40a5.1715612414483.js";import{G as Gt}from"./index-c5e45b02.js";function je(t){"@babel/helpers - typeof";return je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(t)}function Ue(){return Ue=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ue.apply(this,arguments)}function ne(t,e){return Wt(t)||Ut(t,e)||bt(t,e)||Lt()}function Lt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ut(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,o,b,s=[],m=!0,g=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;m=!1}else for(;!(m=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);m=!0);}catch(_){g=!0,a=_}finally{try{if(!m&&r.return!=null&&(b=r.return(),Object(b)!==b))return}finally{if(g)throw a}}return s}}function Wt(t){if(Array.isArray(t))return t}function tt(t){return Jt(t)||Xt(t)||bt(t)||qt()}function qt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bt(t,e){if(t){if(typeof t=="string")return Qe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qe(t,e)}}function Xt(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Jt(t){if(Array.isArray(t))return Qe(t)}function Qe(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Pe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rt(Object(r),!0).forEach(function(n){ae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ae(t,e,r){return e=Qt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qt(t){var e=Yt(t,"string");return je(e)=="symbol"?e:String(e)}function Yt(t,e){if(je(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(je(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xe="add",Ge="update",Te="view",Le="custom",ve=function(e,r,n,a){return e.filter(function(o){return a?!!o.dialog:!0}).map(function(o){var b=o.dialog,s=Pe(Pe(Pe({key:"_"},yt(o,["dialog"])),b),{},{_values:n});return typeof s.reSetting=="function"&&(s=s.reSetting(s,r)),s}).filter(function(o){return o&&Array.isArray(o.hiddenMode)&&r?!o.hiddenMode.includes(r):o})},Zt=function(e,r){if(r)return r;var n=ae(ae(ae(ae({},xe,A.dialog.modeAdd),Ge,A.dialog.modeUpdate),Te,A.dialog.modeDetail),Le,A.dialog.modeCustom);return n[e]},Be,He,er=["getFieldValue","getFieldsValue","getFieldError","getFieldsError","isFieldTouched","isFieldsTouched","isFieldValidating","resetFields","scrollToField","setFields","setFieldsValue","submit","validateFields"],tr=d.forwardRef(function(e,r){var n=e.fields,a=e.title,o=e.addApi,b=e.updateApi,s=e.span,m=e.width,g=e.name,_=e.beforeSubmit,M=e.dialogExtend,x=e.formExtend,C=e.drawer,D=e.dialogOnly,G=e.autoClose,q=G===void 0?!0:G,N=e.open,u=e.mode,c=e.spinning,l=c===void 0?!1:c,y=e.onClose,T=e.onCancel,z=e.onSuccess,$=e.onError,Q=e.initialValues,O=e.children,f=d.useMemo(function(){var S=ft(O);return[].concat(tt(n||[]),tt(S))},[n,O]),h=d.useState(!1),p=ne(h,2),B=p[0],I=p[1],Se=d.useState(xe),Ve=ne(Se,2),R=Ve[0],ie=Ve[1],qe=d.useState(!1),$e=ne(qe,2),fe=$e[0],oe=$e[1],j=d.useState(!1),X=ne(j,2),Y=X[0],pe=X[1],Ee=d.useState({}),te=ne(Ee,2),V=te[0],_e=te[1],de=d.useState(ve(f,R,V,D)),we=ne(de,2),k=we[0],le=we[1],L=d.useRef(),Xe=d.useState(a),me=ne(Xe,2),Ie=me[0],Ae=me[1],ke=d.useState({}),Ke=ne(ke,2),H=Ke[0],Me=Ke[1],ye=function(E,w){var W;return function(){for(var P=this,re=arguments.length,J=new Array(re),K=0;K<re;K++)J[K]=arguments[K];clearTimeout(W),W=setTimeout(function(){E.apply(P,J)},w)}};d.useEffect(function(){le(ve(f,R,V,D))},[f]),d.useEffect(function(){Ae(a)},[a]),d.useEffect(function(){I(!!N),N&&(requestAnimationFrame(function(){var S;(S=L.current)===null||S===void 0||S.resetFields()}),Q&&requestAnimationFrame(function(){var S;(S=L.current)===null||S===void 0||S.setFieldsValue(Q)}))},[N,Q]),d.useEffect(function(){u&&(oe(u===Te),ie(u))},[u]);var be=function(E,w){oe(!1),Me(w||{}),w&&w.fields?(k=ve(w.fields,R,V,D),le(k),d.useEffect(function(){le(ve(w.fields,R,V,D))},[w.fields])):(k=ve(f,R,V,D),le(k)),w&&w.title&&Ae(w.title),I(!0),L.current&&L.current.resetFields(),E?(_e(E),requestAnimationFrame(function(){L.current.setFieldsValue(E)})):_e({})},Oe={add:function(E,w){return new Promise(function(W,P){Be=W,He=P,R=xe,ie(u||xe),be(E,w)})},update:function(E,w){return new Promise(function(W,P){Be=W,He=P,R=Ge,ie(u||Ge),be(E,w)})},view:function(E,w){R=Te,ie(u||Te),be(E,w),setTimeout(function(){oe(!0)})},open:function(E,w){R=Le,ie(u||Le),be(E,w)},refreshFields:function(){le(ve(f,R,V,D))},getFormRef:function(){return L},closeDialog:function(){U()}};er.forEach(function(S){Oe[S]=function(){var E;return(E=L.current)[S].apply(E,arguments)}}),d.useImperativeHandle(r,function(){return Oe});var Ne=function(){L.current.submit()},U=function(){I(!1),y&&y(),T&&T()},he=function(E){if(!Y){var w=ae(ae(ae({},xe,o),Ge,b),Le,H.api),W=w[R];if(W){var P=Pe(Pe({},V),E);for(var re in V)re.startsWith("__")&&delete P[re];if(typeof _=="function"){var J=_(P,R);if(J!==!1)P=J;else return}!(e!=null&&e.stopLoading)&&pe(!0),W(P).then(function(K){Be&&Be({data:K,values:E,params:P,initParams:V,closeDialog:U}),H.onSuccess&&H.onSuccess({data:K,values:E,params:P,initParams:V,closeDialog:U}),z&&z({data:K,values:E,params:P,initParams:V,closeDialog:U}),q&&U()},function(K){He&&He({error:K,values:E,params:P,initParams:V,closeDialog:U}),H.onError&&H.onError({error:K,values:E,params:P,initParams:V,closeDialog:U}),$&&$({error:K,values:E,params:P,initParams:V,closeDialog:U})}).finally(function(){pe(!1)})}}};return i.createElement(dt,Ue({width:m,title:Zt(R,Ie),open:B,drawer:C,onConfirm:ye(function(){!Y&&Ne()},300),loading:Y,forceRender:!0,onClose:U,confirmLoading:Y,confirmVisible:R!==Te&&H.readonly!==!0},M,H==null?void 0:H.dialogExtend),i.createElement(_t,{spinning:l},i.createElement(mt,Ue({name:g,readonly:fe,ref:L,fields:k,span:s||22,onConfirm:he},x))))});function Fe(t){return ar(t)||nr(t)||ht(t)||rr()}function rr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nr(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ar(t){if(Array.isArray(t))return Ye(t)}function We(t,e){return lr(t)||or(t,e)||ht(t,e)||ir()}function ir(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ht(t,e){if(t){if(typeof t=="string")return Ye(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ye(t,e)}}function Ye(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function or(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,o,b,s=[],m=!0,g=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;m=!1}else for(;!(m=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);m=!0);}catch(_){g=!0,a=_}finally{try{if(!m&&r.return!=null&&(b=r.return(),Object(b)!==b))return}finally{if(g)throw a}}return s}}function lr(t){if(Array.isArray(t))return t}var ur={extraVisible:!0,extraRefreshVisible:!0,extraSizeVisible:!0,extraSizeDefaultValue:"large",extraSettingVisible:!0,extraFullscreenVisible:!0},cr=function(e,r,n){var a=d.useState(!1),o=We(a,2),b=o[0],s=o[1],m=d.useState(e.filter(function(u){return u.__extraTouched?!0:!u.hidden}).map(function(u,c){var l,y;return{checked:n.includes((l=u==null?void 0:u.key)!==null&&l!==void 0?l:"")?!1:u.__hidden===!1||u.__hidden===void 0,title:u.title||"",key:u.key||"",order:(y=u.__order)!==null&&y!==void 0?y:c,alias:u.__alias||""}})),g=We(m,2),_=g[0],M=g[1];d.useEffect(function(){n&&n.length&&setTimeout(function(){q()},800)},[n]);var x=function(c,l){var y=Fe(_),T=y[c];T.checked=l,M(y)},C=function(c,l){var y=Fe(_),T=y[c];T.alias=l||"",M(y)},D=function(c){if(c!==0){var l=Fe(_),y=l[c],T=l[c-1],z=y.order;y.order=T.order,T.order=z;var $=[l[c-1],l[c]];l[c]=$[0],l[c-1]=$[1],M(l)}},G=function(c){if(c!==_.length-1){var l=Fe(_),y=l[c],T=l[c+1],z=y.order;y.order=T.order,T.order=z;var $=[l[c+1],l[c]];l[c]=$[0],l[c+1]=$[1],M(l)}},q=function(){var c=Fe(e);c.filter(function(l){return l.__extraTouched?!0:!l.hidden}).forEach(function(l){var y=_.find(function(T){return T.key===l.key});y&&(l.__extraTouched=!0,l.__hidden=!y.checked,l.__order=y.order,l.__alias=y.alias)}),r(c),s(!1)},N=function(){};return{fieldsEdit:i.createElement(i.Fragment,null,i.createElement(dt,{title:A.extra.columnSetting,open:b,setVisible:s,onConfirm:q},_.map(function(u,c){return!u.hidden&&i.createElement("div",{className:"g-search-table-extra-fields-edit-line",key:u.key},i.createElement("div",{className:"g-search-table-extra-fields-edit-line-left"},i.createElement(Tt,{defaultChecked:u.checked,onChange:function(y){return x(c,y.target.checked)}},u.title)),i.createElement("div",{className:"g-search-table-extra-fields-edit-line-right"},i.createElement(Pt,{style:{marginRight:20},value:u.alias,placeholder:A.extra.rename,onChange:function(y){return C(c,y.target.value)},allowClear:!0}),i.createElement(se,{title:A.extra.moveUp,placement:"left"},i.createElement(Je,{type:"link",icon:i.createElement(Ct,null),onClick:function(){return D(c)}})),i.createElement(se,{title:A.extra.moveDown,placement:"right"},i.createElement(Je,{type:"link",icon:i.createElement(jt,null),onClick:function(){return G(c)}}))))})),i.createElement(se,{title:A.extra.columnSetting},i.createElement(Dt,{onClick:function(){return s(!0)}}))),setDefaultField:N}};function sr(t,e,r,n,a){var o=Object.assign({},ur,a),b=o.extraVisible,s=o.extraRefreshVisible,m=o.extraSizeVisible,g=o.extraSizeDefaultValue,_=o.extraSettingVisible,M=o.extraFullscreenVisible,x=d.useState(g),C=We(x,2),D=C[0],G=C[1],q=d.useState(!1),N=We(q,2),u=N[0],c=N[1],l=cr(r,n,a.defaultExtra||[]),y=l.fieldsEdit,T=l.setDefaultField,z=function(){t.current.refresh()},$=function(f){G(f.key)};d.useEffect(function(){u?document.body.style.overflow="hidden":document.body.style.overflow="",e.current&&e.current.resize()},[u]);var Q=b?i.createElement("div",{className:"g-search-table-extra-btns",key:"g-search-table-extra-btns"},i.createElement(st,{size:"middle"},s?i.createElement(se,{title:A.extra.refresh},i.createElement(wt,{onClick:z})):null,m?i.createElement(se,{title:A.extra.density},i.createElement(At,{overlay:i.createElement(ze,{style:{width:100},selectedKeys:[D+""],onClick:$},i.createElement(ze.Item,{key:"large"},A.extra.densityLarger),i.createElement(ze.Item,{key:"middle"},A.extra.densityMiddle),i.createElement(ze.Item,{key:"small"},A.extra.densitySmall))},i.createElement(Ot,null))):null,_?y:null,M?u?i.createElement(se,{title:A.extra.exitFullScreen,key:A.extra.exitFullScreen},i.createElement(Ft,{className:"g-search-table-fullscrenn-enter",onClick:function(){return c(!1)}})):i.createElement(se,{title:A.extra.fullScreen,key:A.extra.fullScreen},i.createElement(xt,{className:"g-search-table-fullscrenn-out",onClick:function(){return c(!0)}})):null)):null;return{extraBtns:Q,isEnter:u,setIsEnter:c,size:D,setDefaultField:T}}function De(t){"@babel/helpers - typeof";return De=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(t)}function ee(t){return mr(t)||dr(t)||vt(t)||fr()}function fr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dr(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mr(t){if(Array.isArray(t))return Ze(t)}function nt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function at(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nt(Object(r),!0).forEach(function(n){yr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yr(t,e,r){return e=br(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function br(t){var e=hr(t,"string");return De(e)=="symbol"?e:String(e)}function hr(t,e){if(De(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(De(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function it(t,e){return Sr(t)||gr(t,e)||vt(t,e)||vr()}function vr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vt(t,e){if(t){if(typeof t=="string")return Ze(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ze(t,e)}}function Ze(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function gr(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,o,b,s=[],m=!0,g=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;m=!1}else for(;!(m=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);m=!0);}catch(_){g=!0,a=_}finally{try{if(!m&&r.return!=null&&(b=r.return(),Object(b)!==b))return}finally{if(g)throw a}}return s}}function Sr(t){if(Array.isArray(t))return t}function pr(t){var e=t.rowKey,r=t.selectionType,n=t.onSelectionChange,a=t.selectShowKey,o=t.rowSelection,b=d.useState([]),s=it(b,2),m=s[0],g=s[1],_=d.useState([]),M=it(_,2),x=M[0],C=M[1],D;r&&(D=at(at({},o),{},{type:r,selectedRowKeys:m,onSelect:function(f,h){r==="radio"?u(f):h?c(f):y(null,f)},onSelectAll:function(f,h,p){f?l(h):T(p)}}));var G=function(){g([]),C([])},q=function(f){C(f),g(f.map(function(h){return Z(h,e)}))},N=function(f){var h=ee(x);f.forEach(function(p){m.includes(Z(p,e))||h.push(p)}),C(h),g(h.map(function(p){return Z(p,e)}))},u=function(f){var h=[],p=[];h.push(Z(f,e)),p.push(f),g(h),C(p)},c=function(f){var h=ee(m),p=ee(x);h.push(Z(f,e)),p.push(f),g(h),C(p)},l=function(f){var h=ee(m),p=ee(x);f.forEach(function(B){if(B){var I=Z(B,e);h.includes(I)||(h.push(I),p.push(B))}}),g(h),C(p)},y=function(f,h){var p=ee(m),B=ee(x);f===null&&h&&(f=p.findIndex(function(I){return I===Z(h,e)})),typeof f=="number"&&(p.splice(f,1),B.splice(f,1)),g(p),C(B)},T=function(f){var h=ee(m),p=ee(x);f.forEach(function(B){var I=h.findIndex(function(Se){return Se===Z(B,e)});I>=0&&(h.splice(I,1),p.splice(I,1))}),g(h),C(p)},z=i.createElement("div",{className:"g-search-poper"},x.map(function(O,f){return i.createElement(Rt,{key:Z(O,e),closable:!0,className:"mb",onClose:function(){return y(f)}},O[a||"name"])})),$=i.createElement("div",null,i.createElement("span",null,A.table.selectedBefore,i.createElement(Vt,{title:A.table.selectedTitle,content:z},i.createElement("a",null,x.length))," ",A.table.selectedAfter),i.createElement(kt,{className:"ml",type:"link",size:"small",onClick:G},A.table.selectedClear)),Q=m.length?i.createElement($t,{className:"g-search-table-alert",message:$,showIcon:!0}):"";return d.useEffect(function(){n&&n(x,m)},[n,x]),{header:Q,message:$,tableRowSelection:D,selection:x,clearSelection:G,removeSelection:y,setSelection:q,addSelection:N}}function Re(t){"@babel/helpers - typeof";return Re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(t)}function Ce(){return Ce=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ce.apply(this,arguments)}function ot(t,e){return wr(t)||_r(t,e)||gt(t,e)||Er()}function Er(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _r(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,o,b,s=[],m=!0,g=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;m=!1}else for(;!(m=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);m=!0);}catch(_){g=!0,a=_}finally{try{if(!m&&r.return!=null&&(b=r.return(),Object(b)!==b))return}finally{if(g)throw a}}return s}}function wr(t){if(Array.isArray(t))return t}function ce(t){return Fr(t)||Or(t)||gt(t)||Ar()}function Ar(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gt(t,e){if(t){if(typeof t=="string")return et(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return et(t,e)}}function Or(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Fr(t){if(Array.isArray(t))return et(t)}function et(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ge(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lt(Object(r),!0).forEach(function(n){xr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xr(t,e,r){return e=Tr(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tr(t){var e=Pr(t,"string");return Re(e)=="symbol"?e:String(e)}function Pr(t,e){if(Re(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Re(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Cr=function(e){var r=[],n=[];return e.filter(function(a){return zt(a.search)||a.search===!0}).forEach(function(a){var o,b=typeof a.search=="boolean"?{}:a.search;if(!b)return{title:"配置有误",key:"xxx",type:"input"};var s=ge(ge({title:a.title,key:b.key||a.key||"",type:a.type||"input",options:a.options||[],mode:a.mode},b),Bt(a,a!=null&&(o=a.userKey)!==null&&o!==void 0&&o.length?ce(a==null?void 0:a.userKey):[]));a.children&&(s.children=a.children),s.position==="more"?n.push(s):r.push(s)}),{searchFields:r,moreSearchFields:n}},ut=function(e){return e.map(function(r){var n=typeof r.table=="boolean"?{}:r.table;r.table===!1&&(n={hidden:!0});var a=ge(ge({},yt(r,"table")),{},{title:r.title,key:r.key},n);return a})},jr=function(e){var r={};return e.forEach(function(n){n.key&&n.defaultFilterValue&&n.defaultFilterValue!==0&&(r[n.key]=n.defaultFilterValue)}),r},Dr=function(e){var r=[],n=!1;return e.forEach(function(a){if(a.key&&a.defaultSortsValue){var o={key:a.key,order:a.defaultSortsValue};a.sortOrder>=0&&(n=!0,o.index=a.sortOrder),r.push(o)}}),n&&(r.sort(function(a,o){return(a.index||9999)-(o.index||9999)}),r=r.map(function(a){return{key:a.key,order:a.order}})),r},ct=function(e){if(!e||!e.props)return!1;var r=Ht(e.props,{});return r.tableFooterExtraOnly===!0},Rr=function(e){var r=[],n=[];return Array.isArray(e)?e.forEach(function(a){ct(a)?r.push(a):a&&n.push(a)}):ct(e)?r.push(e):e&&n.push(e),{rightActions:n,footerActions:r}},Kr=d.forwardRef(function(e,r){e.className,e.rowClassName;var n=e.fields,a=e.api,o=e.deleteApi,b=e.children,s=e.data,m=e.title,g=e.ctrl,_=e.selectionType,M=e.onSelectionChange,x=e.rowKey,C=e.dialogFormExtend,D=e.scrollX,G=e.height,q=e.filterData,N=e.beforeSearch,u=e.selectShowKey,c=e.onExpand,l=e.center,y=e.onLoad,T=e.searchVisible,z=e.tableExtend,$=e.pagination,Q=e.btnBefore,O=e.extendSearchParams,f=e.before,h=e.defaultExtra,p=e.after,B=e.editMode,I=e.autoload,Se=e.rowSelection,Ve=e.searchExtend,R=e.onParamsChange,ie=e.tableHeader,qe=e.compact,$e=e.useOriginPagination,fe=d.useMemo(function(){var v=ft(b);return[].concat(ce(n||[]),ce(v))},[n,b]),oe=d.useRef(),j=d.useRef(),X=d.useRef(),Y=d.useRef(),pe=Cr(fe),Ee=pe.searchFields,te=pe.moreSearchFields,V=d.useState(ut(fe)),_e=ot(V,2),de=_e[0],we=_e[1],k=pr({rowKey:x,selectionType:_,onSelectionChange:M,selectShowKey:u,rowSelection:Se}),le=k.header,L=k.message,Xe=k.tableRowSelection,me=k.selection,Ie=k.clearSelection,Ae=k.setSelection,ke=k.addSelection,Ke=k.removeSelection,H=Rr(b),Me=H.footerActions,ye=H.rightActions,be=d.useState([]),Oe=ot(be,2),Ne=Oe[0],U=Oe[1],he=sr(j,X,de,we,e),S=he.extraBtns,E=he.size,w=he.isEnter,W=he.setDefaultField,P=function(){we(ut(fe)),X.current&&typeof X.current.rezise=="function"&&X.current.rezise()};d.useEffect(function(){P()},[fe,w]);var re=function(){var F,ue,pt=((F=Y.current)===null||F===void 0?void 0:F.getFieldsValue())||{},Et=((ue=X.current)===null||ue===void 0?void 0:ue.getFieldsValue())||{};return ge(ge({},pt),Et)},J=function(){j.current.reset(re())};d.useImperativeHandle(r,function(){return{refresh:function(){j.current.refresh()},reset:function(){J()},clearSelection:function(){Ie()},getSearchRef:function(){return X.current},getMoreSearchRef:function(){return Y.current},getSelection:function(){return me},setSelection:Ae,addSelection:ke,doLayout:P,getTableData:function(){return j.current.getTableData()},setTableData:function(F){return j.current.setTableData(F)},clearFilters:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j.current.clearFilters(F)},setFiltersValue:function(F){return j.current.setFiltersValue(F)},setSortsValue:function(F){return j.current.setSortsValue(F)},clearSorts:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j.current.clearSorts(F)},getApiParams:function(){return j.current.getApiParams()},deleteRowByKey:function(F){j.current.deleteRowByKey(F)},getFromRef:function(){return oe.current},addRow:function(F){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"after";j.current.addRow(F,ue)},getEditTableRowForm:function(){return Ne},setPaginitionValue:function(F){j.current.setPaginitionValue(F)}}});var K={ref:j,rowSelection:Xe,api:a,size:E,data:s,title:m,ctrl:g,rowKey:x,scrollX:D,height:G,filterData:q,beforeSearch:N,onExpand:c,onLoad:y,tableExtend:z,pagination:$,defaultFiltersValue:jr(de),defaultSortsValue:Dr(de),defaultSearchValue:Kt([].concat(ce(Ee),ce(te))),btnBefore:Q,editMode:B,extendSearchParams:O,autoload:I,onParamsChange:R,tableHeader:ie,getSearchParams:re,useOriginPagination:$e},St=d.useMemo(function(){var v=[];return te&&te.length&&v.push(i.createElement(mt,{className:"g-search-table-more",key:"g-search-table-more",ref:Y,fields:te,onConfirm:J},i.createElement(Je,{className:"g-search-table-more-submit",htmlType:"submit"}))),ye&&ye.length&&v.push(ye),S&&v.push(S),v.length===1?v[0]:v.length?v:null},[Y,te,J,ye,S]);return d.useEffect(function(){h&&W(h)},[]),i.createElement("div",{className:It("g-search-table",w&&"full",qe&&"compact")},i.createElement(Mt.Provider,{value:{formRef:oe,tableRef:j,selection:me,deleteApi:o,rowKey:x,setSelection:Ae,clearSelection:Ie,addSelection:ke,removeSelection:Ke,searchTableRef:r,editTableRow:Ne,setEditTableRow:function(F){U(function(ue){return[].concat(ce(ue),ce(F))})}}},f,T!==!1&&Ee.length>0?i.createElement(Gt,Ce({ref:X,fields:Ee,onConfirm:J},Ve)):null,l,C?i.createElement(tr,Ce({ref:oe,dialogOnly:!0},C),b):null,i.createElement(Nt,Ce({},K,{fields:de,header:le}),St),me.length&&Me.length?i.createElement("div",{className:"g-search-table-footer-actions"},L,i.createElement(st,null,Me)):null,p))});export{Kr as G};
