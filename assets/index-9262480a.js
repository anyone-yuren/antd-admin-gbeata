var E=Object.defineProperty,Y=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var I=(a,s,t)=>s in a?E(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,x=(a,s)=>{for(var t in s||(s={}))w.call(s,t)&&I(a,t,s[t]);if(p)for(var t of p(s))F.call(s,t)&&I(a,t,s[t]);return a},f=(a,s)=>Y(a,M(s));var C=(a,s)=>{var t={};for(var n in a)w.call(a,n)&&s.indexOf(n)<0&&(t[n]=a[n]);if(a!=null&&p)for(var n of p(a))s.indexOf(n)<0&&F.call(a,n)&&(t[n]=a[n]);return t};var N=(a,s,t)=>new Promise((n,d)=>{var b=r=>{try{c(t.next(r))}catch(o){d(o)}},u=r=>{try{c(t.throw(r))}catch(o){d(o)}},c=r=>r.done?n(r.value):Promise.resolve(r.value).then(b,u);c((t=t.apply(a,s)).next())});import{Q as k,r as D,j as e,a as S,O as T,V as v,B as g,bI as P,aA as V,k as B,W as O,as as R,bf as _,X as A,I as G,U as K}from"./index-99bb278a.js";import{P as W,e as L}from"./websiteSetting-b221236c.js";const Q=[{key:"1001",name:"张三",sex:"男",birth:"2002-05-06",education:"高中",hobby:"羽毛球、篮球、听歌、阅读",forbid:!1},{key:"1002",name:"李四",sex:"男",birth:"1998-09-21",education:"初中",hobby:"乒乓球、排球、游泳",forbid:!0},{key:"1003",name:"王五",sex:"男",birth:"1993-06-06",education:"本科",hobby:"旱冰、滑雪、跳高、打游戏",forbid:!1},{key:"1004",name:"辛八",sex:"男",birth:"1995-08-03",education:"大专",hobby:"网球、篮球、跳伞",forbid:!0},{key:"1005",name:"刘二",sex:"女",birth:"1999-11-05",education:"本科",hobby:"滑翔、游泳、篮球、看电影",forbid:!0},{key:"1006",name:"赵七",sex:"男",birth:"2000-07-18",education:"大专",hobby:"游泳、篮球、潜水",forbid:!1},{key:"1007",name:"杨一",sex:"女",birth:"1998-12-25",education:"高中",hobby:"冲浪、上网、看书、打游戏",forbid:!1}],U={key:{title:"数字输入框",type:"number"},name:{title:"输入框",type:"text"},sex:{title:"单选框",type:"radio"},birth:{title:"日期选择框",type:"date"},education:{title:"选择器",type:"select"},hobby:{title:"多选框",type:"checkbox"},forbid:{title:"开关",type:"switch"},action:{title:"按钮",type:"button"}},X=(a,s)=>{switch(a){case"number":return e.jsx(K,{min:1e3,max:2e3});case"text":return e.jsx(G,{});case"radio":return e.jsx(A.Group,{options:["男","女"].map(t=>({value:t,label:t}))});case"date":return e.jsx("div",{children:e.jsx(R,{defaultValue:_(s.birth,"YYYY-MM-DD"),format:"YYYY-MM-DD"})});case"select":return e.jsx(O,{options:["初中","高中","大专","本科"].map(t=>({value:t})),style:{width:"80px"}});case"checkbox":return e.jsx(B.Group,{options:s.hobby.split("、"),defaultValue:s.hobby.split("、")});case"switch":return e.jsx(V,{defaultChecked:s.forbid})}},q=r=>{var o=r,{editing:a,dataIndex:s,title:t,cellType:n,record:d,index:b,children:u}=o,c=C(o,["editing","dataIndex","title","cellType","record","index","children"]);const m=X(n,d);return e.jsx("td",f(x({},c),{children:a?e.jsx(k.Item,{name:s,style:{margin:0},children:m}):u}))},Z=()=>{const[a]=k.useForm(),[s,t]=D.useState(Q),[n,d]=D.useState(""),b=i=>i.key===n,u=i=>{a.setFieldsValue(x({},i)),d(i.key)},c=()=>{d("")},r=i=>N(void 0,null,function*(){try{const l=yield a.validateFields(),h=[...s],j=h.findIndex(y=>i===y.key);if(j>-1){const y=h[j];h.splice(j,1,x(x({},y),l)),t(h),d("")}else h.push(l),t(h),d("")}catch(l){console.log("Validate Failed:",l)}}),m=[{title:()=>e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"编号"}),e.jsx("p",{className:"sub-title",children:"(数字输入框)"})]}),dataIndex:"key",width:70,editable:!0,align:"center"},{title:()=>e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"姓名"}),e.jsx("p",{className:"sub-title",children:"(输入框)"})]}),dataIndex:"name",width:110,editable:!0,align:"center"},{title:()=>e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"性别"}),e.jsx("p",{className:"sub-title",children:"(单选框)"})]}),dataIndex:"sex",width:120,editable:!0,align:"center"},{title:()=>e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"生日"}),e.jsx("p",{className:"sub-title",children:"(日期选择器)"})]}),dataIndex:"birth",width:140,editable:!0,align:"center"},{title:()=>e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"学历"}),e.jsx("p",{className:"sub-title",children:"(选择器)"})]}),dataIndex:"education",width:80,editable:!0,align:"center"},{title:()=>e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"爱好"}),e.jsx("p",{className:"sub-title",children:"(多选框)"})]}),dataIndex:"hobby",width:250,editable:!0,align:"center"},{title:()=>e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"禁止编辑"}),e.jsx("p",{className:"sub-title",children:"(开关)"})]}),dataIndex:"forbid",width:70,editable:!0,align:"center",render:(i,l)=>e.jsx("span",{children:l.forbid?"是":"否"})},{title:()=>e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"操作"}),e.jsx("p",{className:"sub-title",children:"(按钮)"})]}),dataIndex:"action",width:70,align:"center",render:(i,l)=>b(l)?e.jsxs(v,{children:[e.jsx(g,{type:"primary",ghost:!0,onClick:()=>r(l.key),children:"保存"}),e.jsx(P,{title:"是否取消编辑？",onConfirm:c,children:e.jsx(g,{type:"primary",danger:!0,ghost:!0,children:"取消"})})]}):e.jsx(g,{disabled:n!=="",onClick:()=>u(l),children:"编辑"})}].map(i=>i.editable?f(x({},i),{onCell:l=>({record:l,cellType:U[i.dataIndex].type,dataIndex:i.dataIndex,title:i.title,editing:b(l)})}):i);return e.jsx(W,{plugin:L,children:e.jsx(S,{bordered:!1,children:e.jsx(k,{form:a,component:!1,children:e.jsx(T,{components:{body:{cell:q}},dataSource:s,columns:m,pagination:!1})})})})};export{Z as default};
