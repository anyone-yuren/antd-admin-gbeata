import{u as Z,T as ee,S as te,f as G,F as ne,c as re,e as se,h as oe,C as ce}from"./iconUtil-b0378580.js";import{r as a,N as M,O as A,l as g,x as J,ba as le,e as Q,z as D}from"./index-17f935ee.js";var ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};const ie=ae;var de=function(s,r){return a.createElement(M,A({},s,{ref:r,icon:ie}))};const fe=a.forwardRef(de);var ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"};const pe=ue;var ye=function(s,r){return a.createElement(M,A({},s,{ref:r,icon:pe}))};const he=a.forwardRef(ye);var me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"};const xe=me;var ge=function(s,r){return a.createElement(M,A({},s,{ref:r,icon:xe}))};const ve=a.forwardRef(ge),R=4;function be(t){const{dropPosition:s,dropLevelOffset:r,prefixCls:n,indent:o,direction:e="ltr"}=t,l=e==="ltr"?"left":"right",c=e==="ltr"?"right":"left",d={[l]:-r*o+R,[c]:0};switch(s){case-1:d.top=-3;break;case 1:d.bottom=-3;break;default:d.bottom=-3,d[l]=o+R;break}return g.createElement("div",{style:d,className:`${n}-drop-indicator`})}const Oe=g.forwardRef((t,s)=>{const{getPrefixCls:r,direction:n,virtual:o,tree:e}=g.useContext(J),{prefixCls:l,className:c,showIcon:d=!1,showLine:f,switcherIcon:C,blockNode:b=!1,children:S,checkable:O=!1,selectable:K=!0,draggable:v,motion:E,style:j}=t,p=r("tree",l),H=r(),I=E!=null?E:Object.assign(Object.assign({},le(H)),{motionAppear:!1}),k=Object.assign(Object.assign({},t),{checkable:O,selectable:K,showIcon:d,motion:I,blockNode:b,showLine:!!f,dropIndicatorRender:be}),[w,z]=Z(p),h=g.useMemo(()=>{if(!v)return!1;let i={};switch(typeof v){case"function":i.nodeDraggable=v;break;case"object":i=Object.assign({},v);break}return i.icon!==!1&&(i.icon=i.icon||g.createElement(ve,null)),i},[v]),u=i=>g.createElement(te,{prefixCls:p,switcherIcon:C,treeNodeProps:i,showLine:f});return w(g.createElement(ee,Object.assign({itemHeight:20,ref:s,virtual:o},k,{style:Object.assign(Object.assign({},e==null?void 0:e.style),j),prefixCls:p,className:Q({[`${p}-icon-hide`]:!d,[`${p}-block-node`]:b,[`${p}-unselectable`]:!K,[`${p}-rtl`]:n==="rtl"},e==null?void 0:e.className,c,z),direction:n,checkable:O&&g.createElement("span",{className:`${p}-checkbox-inner`}),selectable:K,switcherIcon:u,draggable:h}),S))}),U=Oe;var x;(function(t){t[t.None=0]="None",t[t.Start=1]="Start",t[t.End=2]="End"})(x||(x={}));function L(t,s,r){const{key:n,children:o}=r;function e(l){const c=l[n],d=l[o];s(c,l)!==!1&&L(d||[],s,r)}t.forEach(e)}function Ke(t){let{treeData:s,expandedKeys:r,startKey:n,endKey:o,fieldNames:e}=t;const l=[];let c=x.None;if(n&&n===o)return[n];if(!n||!o)return[];function d(f){return f===n||f===o}return L(s,f=>{if(c===x.End)return!1;if(d(f)){if(l.push(f),c===x.None)c=x.Start;else if(c===x.Start)return c=x.End,!1}else c===x.Start&&l.push(f);return r.includes(f)},G(e)),l}function F(t,s,r){const n=D(s),o=[];return L(t,(e,l)=>{const c=n.indexOf(e);return c!==-1&&(o.push(l),n.splice(c,1)),!!n.length},G(r)),o}var B=globalThis&&globalThis.__rest||function(t,s){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)s.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]]);return r};function Ee(t){const{isLeaf:s,expanded:r}=t;return s?a.createElement(ne,null):r?a.createElement(fe,null):a.createElement(he,null)}function q(t){let{treeData:s,children:r}=t;return s||oe(r)}const we=(t,s)=>{var{defaultExpandAll:r,defaultExpandParent:n,defaultExpandedKeys:o}=t,e=B(t,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const l=a.useRef(),c=a.useRef(),d=()=>{const{keyEntities:h}=re(q(e));let u;return r?u=Object.keys(h):n?u=se(e.expandedKeys||o||[],h):u=e.expandedKeys||o,u},[f,C]=a.useState(e.selectedKeys||e.defaultSelectedKeys||[]),[b,S]=a.useState(()=>d());a.useEffect(()=>{"selectedKeys"in e&&C(e.selectedKeys)},[e.selectedKeys]),a.useEffect(()=>{"expandedKeys"in e&&S(e.expandedKeys)},[e.expandedKeys]);const O=(h,u)=>{var i;return"expandedKeys"in e||S(h),(i=e.onExpand)===null||i===void 0?void 0:i.call(e,h,u)},K=(h,u)=>{var i;const{multiple:_,fieldNames:N}=e,{node:W,nativeEvent:m}=u,{key:P=""}=W,T=q(e),$=Object.assign(Object.assign({},u),{selected:!0}),X=(m==null?void 0:m.ctrlKey)||(m==null?void 0:m.metaKey),Y=m==null?void 0:m.shiftKey;let y;_&&X?(y=h,l.current=P,c.current=y,$.selectedNodes=F(T,y,N)):_&&Y?(y=Array.from(new Set([].concat(D(c.current||[]),D(Ke({treeData:T,expandedKeys:b,startKey:P,endKey:l.current,fieldNames:N}))))),$.selectedNodes=F(T,y,N)):(y=[P],l.current=P,c.current=y,$.selectedNodes=F(T,y,N)),(i=e.onSelect)===null||i===void 0||i.call(e,y,$),"selectedKeys"in e||C(y)},{getPrefixCls:v,direction:E}=a.useContext(J),{prefixCls:j,className:p,showIcon:H=!0,expandAction:I="click"}=e,k=B(e,["prefixCls","className","showIcon","expandAction"]),w=v("tree",j),z=Q(`${w}-directory`,{[`${w}-directory-rtl`]:E==="rtl"},p);return a.createElement(U,Object.assign({icon:Ee,ref:s,blockNode:!0},k,{showIcon:H,expandAction:I,prefixCls:w,className:z,expandedKeys:b,selectedKeys:f,onSelect:K,onExpand:O}))},Ce=a.forwardRef(we),Se=Ce,V=U;V.DirectoryTree=Se;V.TreeNode=ce;const Te=V;export{Te as T};
