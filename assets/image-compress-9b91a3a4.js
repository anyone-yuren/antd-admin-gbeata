var F=Object.defineProperty,w=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var x=(t,a,l)=>a in t?F(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,r=(t,a)=>{for(var l in a||(a={}))P.call(a,l)&&x(t,l,a[l]);if(g)for(var l of g(a))M.call(a,l)&&x(t,l,a[l]);return t},m=(t,a)=>w(t,B(a));import{Q as i,r as u,j as e,R as E,C as j,a as b,V,U as d,be as k,W as I,B as N}from"./index-2a182a63.js";import{P as G,I as q,c as y}from"./websiteSetting-858f1873.js";import{g as f,U as T,c as U,a as _}from"./download-f1af6c6f.js";import"./index-f6e367ea.js";const $={width:1920,height:1080,ratio:100,quality:1,type:"image/png"},z={width:1920,height:1080,aspectRatio:1920/1080,imgSrc:y},D=()=>{const[t]=i.useForm(),[a,l]=u.useState(z);u.useEffect(()=>{f(y).then(({width:s,height:n})=>{t.setFieldsValue({width:s,height:n}),l(m(r({},a),{width:s,height:n,aspectRatio:s/n}))})},[]);const S=s=>{l(m(r({},a),{imgSrc:s})),f(s).then(({width:n,height:o})=>{t.setFieldsValue({width:n,height:o}),l(m(r({},a),{width:n,height:o,aspectRatio:n/o}))})},p=(s,n)=>{const o=Number(Math.round(s/a.aspectRatio).toFixed(0)),c=Number(Math.round(o/a[n]*100).toFixed(2));t.setFieldsValue({[n]:o,ratio:c})},C=s=>{const{width:n,height:o,quality:c,type:h}=s,R=h.replace(/image\//,"")||"png";U(a.imgSrc,{width:n,height:o,quality:c,mimeType:h}).then(v=>{_(v,`compress-image.${R}`)})};return e.jsx(G,{plugin:q,children:e.jsxs(E,{gutter:12,children:[e.jsx(j,{span:16,children:e.jsx(b,{title:"图片区域",bordered:!1,bodyStyle:{height:"500px"},children:e.jsx("div",{className:"flex-center",children:e.jsx("div",{style:{width:"800px",height:"450px",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundImage:`url(${a.imgSrc})`}})})})}),e.jsx(j,{span:8,children:e.jsx(b,{title:"设置区域",bordered:!1,bodyStyle:{height:"500px"},children:e.jsxs(i,{form:t,colon:!1,labelCol:{span:6},wrapperCol:{span:18},labelAlign:"left",initialValues:r({},$),style:{width:"300px",margin:"60px auto 0"},onFinish:C,children:[e.jsx(i.Item,{label:"图片上传",children:e.jsx(T,{name:"选择图片",isFull:!0,onSuccess:S})}),e.jsx(i.Item,{label:"图片尺寸",style:{marginBottom:0},children:e.jsxs(V,{children:[e.jsx(i.Item,{name:"width",children:e.jsx(d,{min:0,max:a.width,controls:!1,addonBefore:e.jsx("span",{children:"宽"}),onChange:s=>p(s,"height")})}),e.jsx(i.Item,{children:e.jsx(k,{name:"linking"})}),e.jsx(i.Item,{name:"height",children:e.jsx(d,{min:0,max:a.height,controls:!1,addonBefore:e.jsx("span",{children:"高"}),onChange:s=>p(s,"width")})})]})}),e.jsx(i.Item,{label:"压缩比例",name:"ratio",children:e.jsx(d,{min:0,max:100,controls:!1,formatter:s=>`${s}%`,disabled:!0,style:{width:"100%"}})}),e.jsx(i.Item,{label:"图片质量",name:"quality",children:e.jsx(I,{options:[{value:1,label:100},{value:.8,label:80},{value:.6,label:60},{value:.4,label:40}]})}),e.jsx(i.Item,{label:"图片格式",name:"type",children:e.jsx(I,{options:[{value:"image/png",label:"PNG"},{value:"image/jpg",label:"JPG"},{value:"image/bmp",label:"BMP"}]})}),e.jsx(i.Item,{label:" ",children:e.jsx(N,{type:"primary",htmlType:"submit",style:{width:"100%"},children:"压缩图片"})})]})})})]})})};export{D as default};
