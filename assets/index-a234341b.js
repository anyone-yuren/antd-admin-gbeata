import{u as e,T as t,S as n,f as r,F as a,c as s,e as c,h as l,C as o}from"./iconUtil-b6ffc553.js";import{r as i,N as d,O as f,l as u,x as p,ba as h,e as m,z as y}from"./index-0c334d78.js";const b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};var x=function(e,t){return i.createElement(d,f({},e,{ref:t,icon:b}))};const g=i.forwardRef(x);const v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"};var E=function(e,t){return i.createElement(d,f({},e,{ref:t,icon:v}))};const w=i.forwardRef(E);const K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"};var N=function(e,t){return i.createElement(d,f({},e,{ref:t,icon:K}))};const O=i.forwardRef(N);function j(e){const{dropPosition:t,dropLevelOffset:n,prefixCls:r,indent:a,direction:s="ltr"}=e,c="ltr"===s?"left":"right",l={[c]:-n*a+4,["ltr"===s?"right":"left"]:0};switch(t){case-1:l.top=-3;break;case 1:l.bottom=-3;break;default:l.bottom=-3,l[c]=a+4}return u.createElement("div",{style:l,className:`${r}-drop-indicator`})}const k=u.forwardRef(((r,a)=>{const{getPrefixCls:s,direction:c,virtual:l,tree:o}=u.useContext(p),{prefixCls:i,className:d,showIcon:f=!1,showLine:y,switcherIcon:b,blockNode:x=!1,children:g,checkable:v=!1,selectable:E=!0,draggable:w,motion:K,style:N}=r,k=s("tree",i),S=s(),z=null!=K?K:Object.assign(Object.assign({},h(S)),{motionAppear:!1}),C=Object.assign(Object.assign({},r),{checkable:v,selectable:E,showIcon:f,motion:z,blockNode:x,showLine:Boolean(y),dropIndicatorRender:j}),[H,I]=e(k),L=u.useMemo((()=>{if(!w)return!1;let e={};switch(typeof w){case"function":e.nodeDraggable=w;break;case"object":e=Object.assign({},w)}return!1!==e.icon&&(e.icon=e.icon||u.createElement(O,null)),e}),[w]);return H(u.createElement(t,Object.assign({itemHeight:20,ref:a,virtual:l},C,{style:Object.assign(Object.assign({},null==o?void 0:o.style),N),prefixCls:k,className:m({[`${k}-icon-hide`]:!f,[`${k}-block-node`]:x,[`${k}-unselectable`]:!E,[`${k}-rtl`]:"rtl"===c},null==o?void 0:o.className,d,I),direction:c,checkable:v?u.createElement("span",{className:`${k}-checkbox-inner`}):v,selectable:E,switcherIcon:e=>u.createElement(n,{prefixCls:k,switcherIcon:b,treeNodeProps:e,showLine:y}),draggable:L}),g))}));var S,z;function C(e,t,n){const{key:r,children:a}=n;e.forEach((function(e){const s=e[r],c=e[a];!1!==t(s,e)&&C(c||[],t,n)}))}function H(e){let{treeData:t,expandedKeys:n,startKey:a,endKey:s,fieldNames:c}=e;const l=[];let o=S.None;if(a&&a===s)return[a];if(!a||!s)return[];return C(t,(e=>{if(o===S.End)return!1;if(function(e){return e===a||e===s}(e)){if(l.push(e),o===S.None)o=S.Start;else if(o===S.Start)return o=S.End,!1}else o===S.Start&&l.push(e);return n.includes(e)}),r(c)),l}function I(e,t,n){const a=y(t),s=[];return C(e,((e,t)=>{const n=a.indexOf(e);return-1!==n&&(s.push(t),a.splice(n,1)),!!a.length}),r(n)),s}(z=S||(S={}))[z.None=0]="None",z[z.Start=1]="Start",z[z.End=2]="End";var L=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function M(e){const{isLeaf:t,expanded:n}=e;return t?i.createElement(a,null):n?i.createElement(g,null):i.createElement(w,null)}function P(e){let{treeData:t,children:n}=e;return t||l(n)}const R=(e,t)=>{var{defaultExpandAll:n,defaultExpandParent:r,defaultExpandedKeys:a}=e,l=L(e,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const o=i.useRef(),d=i.useRef(),[f,u]=i.useState(l.selectedKeys||l.defaultSelectedKeys||[]),[h,b]=i.useState((()=>(()=>{const{keyEntities:e}=s(P(l));let t;return t=n?Object.keys(e):r?c(l.expandedKeys||a||[],e):l.expandedKeys||a,t})()));i.useEffect((()=>{"selectedKeys"in l&&u(l.selectedKeys)}),[l.selectedKeys]),i.useEffect((()=>{"expandedKeys"in l&&b(l.expandedKeys)}),[l.expandedKeys]);const{getPrefixCls:x,direction:g}=i.useContext(p),{prefixCls:v,className:E,showIcon:w=!0,expandAction:K="click"}=l,N=L(l,["prefixCls","className","showIcon","expandAction"]),O=x("tree",v),j=m(`${O}-directory`,{[`${O}-directory-rtl`]:"rtl"===g},E);return i.createElement(k,Object.assign({icon:M,ref:t,blockNode:!0},N,{showIcon:w,expandAction:K,prefixCls:O,className:j,expandedKeys:h,selectedKeys:f,onSelect:(e,t)=>{var n;const{multiple:r,fieldNames:a}=l,{node:s,nativeEvent:c}=t,{key:i=""}=s,f=P(l),p=Object.assign(Object.assign({},t),{selected:!0}),m=(null==c?void 0:c.ctrlKey)||(null==c?void 0:c.metaKey),b=null==c?void 0:c.shiftKey;let x;r&&m?(x=e,o.current=i,d.current=x,p.selectedNodes=I(f,x,a)):r&&b?(x=Array.from(new Set([].concat(y(d.current||[]),y(H({treeData:f,expandedKeys:h,startKey:i,endKey:o.current,fieldNames:a}))))),p.selectedNodes=I(f,x,a)):(x=[i],o.current=i,d.current=x,p.selectedNodes=I(f,x,a)),null===(n=l.onSelect)||void 0===n||n.call(l,x,p),"selectedKeys"in l||u(x)},onExpand:(e,t)=>{var n;return"expandedKeys"in l||b(e),null===(n=l.onExpand)||void 0===n?void 0:n.call(l,e,t)}}))},$=i.forwardRef(R),A=k;A.DirectoryTree=$,A.TreeNode=o;const T=A;export{T};
